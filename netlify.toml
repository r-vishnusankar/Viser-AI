[build]
  command = "echo 'Build complete - environment variables should be set in Netlify dashboard'"
  publish = "."

[build.environment]
  PYTHON_VERSION = "3.11"
  # Disable secrets scanning - env var names (USE_OPENAI, EMAIL_ENABLED, etc.) and their
  # values (False, True, smtp.gmail.com) appear in code/config and trigger false positives.
  # Re-enable after: 1) Remove browser_use_profile from repo (git rm -r --cached browser_use_profile)
  # 2) Unmark non-secret config vars in Netlify (USE_OPENAI, EMAIL_ENABLED, AI_PROVIDER, etc.)
  SECRETS_SCAN_ENABLED = "false"

# Note: Netlify Functions don't support WebSockets (SocketIO)
# For full Flask app with SocketIO, consider using:
# - Netlify's Python runtime with serverless-http
# - Or deploy to platforms like Railway, Render, or Heroku

# If deploying Flask API endpoints only (without SocketIO):
# 1. Create serverless functions in netlify/functions/
# 2. Set environment variables in Netlify dashboard:
#    Site settings > Environment variables
#    Add all variables from .env.example

# Example redirects for API routes (if using serverless functions)
# [[redirects]]
#   from = "/api/*"
#   to = "/.netlify/functions/flask-api"
#   status = 200
#   force = false

# Serve app at root - clean URL (no /viser-ai-modern.html in address bar)
[[redirects]]
  from = "/"
  to = "/viser-ai-modern.html"
  status = 200
  force = true
